<h2 mat-dialog-title>Please complete all three steps</h2>
<mat-dialog-content>
  <mat-horizontal-stepper [linear]="false">
    <mat-step [stepControl]="basicFormGroup">
      <form [formGroup]="basicFormGroup">
        <ng-template matStepLabel>Fill basic details</ng-template>
        <mat-form-field>
          <input matInput placeholder="Reference No" formControlName="insuranceRef" required>
          <mat-error>This field is required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-select placeholder="Reason for claim" formControlName="claimReason" required>
            <mat-option *ngFor="let reason of claimReason" [value]="reason.value">
              {{ reason.label }}
            </mat-option>
          </mat-select>
          <mat-error>This field is required</mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="claimReasonSelected">
          <mat-select placeholder="Precise Reason" formControlName="exactReason" required>
            <mat-option *ngFor="let reason of exactReason[selectedReason]" [value]="reason.value">
              {{ reason.label }}
            </mat-option>
          </mat-select>
          <mat-error>This field is required</mat-error>
        </mat-form-field>
        <div>
          <button class="pull-right" mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="documentFormGroup" optional>
      <form [formGroup]="documentFormGroup">
        <ng-template matStepLabel>Upload required Documents</ng-template>
        <!--  -->
        <mat-form-field *ngIf="documentFormGroup.get('idProof')">
          <app-file-input formControlName="idProof" placeholder="Your id proof" required></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('idProof').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('idProof').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('idProof')?.getError('maxContentSize').maxSize | byteFormat}} ({{documentFormGroup.get('idProof')?.getError('maxContentSize').actualSize
            | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('idProof').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('invoice')">
          <app-file-input formControlName="invoice" placeholder="Device invoice" required></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('invoice').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('invoice').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('invoice')?.getError('maxContentSize').maxSize | byteFormat}} ({{documentFormGroup.get('invoice')?.getError('maxContentSize').actualSize
            | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('invoice').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('fir')">
          <app-file-input formControlName="fir" placeholder="Police Report" required></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('fir').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('fir').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('fir')?.getError('maxContentSize').maxSize | byteFormat}} ({{documentFormGroup.get('fir')?.getError('maxContentSize').actualSize
            | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('fir').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('expenseReciept')">
          <app-file-input formControlName="expenseReciept" placeholder="Repair/Replace Invoice" required></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('expenseReciept').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('expenseReciept').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('expenseReciept')?.getError('maxContentSize').maxSize | byteFormat}}
            ({{documentFormGroup.get('expenseReciept')?.getError('maxContentSize').actualSize | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('expenseReciept').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('hospitalReport')">
          <app-file-input formControlName="hospitalReport" placeholder="Medical Report" required></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('hospitalReport').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('hospitalReport').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('hospitalReport')?.getError('maxContentSize').maxSize | byteFormat}}
            ({{documentFormGroup.get('hospitalReport')?.getError('maxContentSize').actualSize | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('hospitalReport').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('devicePhotos')">
          <app-file-input formControlName="devicePhotos" placeholder="Device Photos" required multiple></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('devicePhotos').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('devicePhotos').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('devicePhotos')?.getError('maxContentSize').maxSize | byteFormat}}
            ({{documentFormGroup.get('devicePhotos')?.getError('maxContentSize').actualSize | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('devicePhotos').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="documentFormGroup.get('entityPhotos')">
          <app-file-input formControlName="entityPhotos" placeholder="Entity photos" required multiple></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="documentFormGroup.get('entityPhotos').hasError('required')">
            Please select a file
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('entityPhotos').hasError('maxContentSize')">
            The total size must not exceed {{documentFormGroup.get('entityPhotos')?.getError('maxContentSize').maxSize | byteFormat}}
            ({{documentFormGroup.get('entityPhotos')?.getError('maxContentSize').actualSize | byteFormat}}).
          </mat-error>
          <mat-error *ngIf="documentFormGroup.get('entityPhotos').hasError('fileType')">
            Invalid File Type
          </mat-error>
        </mat-form-field>
        <div>
          <button class="pull-right m-l-10" mat-raised-button color="primary" matStepperNext>Next</button>
          <button class="pull-right" mat-raised-button color="warn" matStepperPrevious>Back</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="videoFormGroup">
      <app-video-record (onSubmission)="onRecordComplete($event)"></app-video-record>
      <form [formGroup]="videoFormGroup">
        <ng-template matStepLabel>Video Proof</ng-template>
        <mat-form-field [hidden]="true">
          <app-file-input formControlName="videoProof" placeholder="Video proof" required multiple></app-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error>This field is required</mat-error>
        </mat-form-field>
        <div>
          <button class="pull-right m-l-10" mat-raised-button color="primary" matStepperNext>Next</button>
          <button class="pull-right" mat-raised-button color="warn" matStepperPrevious>Back</button>
        </div>
      </form>
    </mat-step>

    <mat-step>
      <form>
        <ng-template matStepLabel>Confirm your information</ng-template>
        <div *ngIf="uploadProgress.idProof" class="progress-container">
          <li>
            <span>Uploading id proof</span>
            <mat-progress-spinner *ngIf="uploadProgress.idProof != 100" [mode]="'determinate'" [value]="uploadProgress.idProof" color="warn"
              [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="uploadProgress.idProof == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngIf="uploadProgress.invoice" class="progress-container">
          <li>
            <span>Uploading invoice</span>
            <mat-progress-spinner *ngIf="uploadProgress.invoice != 100" [mode]="'determinate'" [value]="uploadProgress.invoice" color="warn"
              [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="uploadProgress.invoice == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngIf="uploadProgress.fir" class="progress-container">
          <li>
            <span>Uploading FIR</span>
            <mat-progress-spinner *ngIf="uploadProgress.fir != 100" [mode]="'determinate'" [value]="uploadProgress.fir" color="warn"
              [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="uploadProgress.fir == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngIf="uploadProgress.expenseReciept" class="progress-container">
          <li>
            <span>Uploading your expense proof</span>
            <mat-progress-spinner *ngIf="uploadProgress.expenseReciept != 100" [mode]="'determinate'" [value]="uploadProgress.expenseReciept"
              color="warn" [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="uploadProgress.expenseReciept == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngIf="uploadProgress.hospitalReport" class="progress-container">
          <li>
            <span>Uploading hospital proof</span>
            <mat-progress-spinner *ngIf="uploadProgress.hospitalReport != 100" [mode]="'determinate'" [value]="uploadProgress.hospitalReport"
              color="warn" [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="uploadProgress.hospitalReport == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngFor="let progress of uploadProgress.devicePhotos" class="progress-container">
          <li>
            <span>Uploading device images</span>
            <mat-progress-spinner *ngIf="progress != 100" [mode]="'determinate'" [value]="progress" color="warn" [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="progress == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div *ngFor="let progress of uploadProgress.entityPhotos" class="progress-container">
          <li>
            <span>Uploading entity images</span>
            <mat-progress-spinner *ngIf="progress != 100" [mode]="'determinate'" [value]="progress" color="warn" [strokeWidth]="4" [diameter]="32"></mat-progress-spinner>
            <i *ngIf="progress == 100" class="fa fa-check-circle-o" style="color:green"> &nbsp;Completed</i>
          </li>
        </div>
        <div>
          <button class="pull-right" (click)="makeClaimRequest()" mat-raised-button color="primary">Submit Calim Request</button>
        </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>

</mat-dialog-content>

<!-- <mat-dialog-actions class="pull-right">
  <button mat-raised-button color="primary" (click)="dialogRef.close()">Proceed</button>
  <button mat-raised-button color="warn" (click)="dialogRef.close()">Not Now</button>
</mat-dialog-actions> -->